<!DOCTYPE html>
<html>


<head>
    <meta charset="utf-8">
    <title>Generate Picture 0.0.3 </title>
    <!----<link href="assets/css/bootstrap-combined.min.css" rel="stylesheet"> -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="assets/css/font-awesome.css" rel="stylesheet">
    <style>
        body {}


        .content {
		    margin-Top: 20px;
            margin-right: 100px;
			margin-left: 100px;
        }

        #editor {
            resize: vertical;
            overflow: auto;
            border: 1px solid silver;
            border-radius: 5px;
            min-height: 200px;
            box-shadow: inset 0 0 10px silver;
            padding: 1em;
        }
		.InputText {
		height: 34px; 
		padding: 6px 12px; 
		font-size: 14px; 
		line-height: 1.42857143; 
		color: #555; 
		background-color: #fff; 
		background-image: none; 
		border: 1px solid #ccc; 
		border-radius: 4px;
		}
		
		
		
    </style>
    <link rel="stylesheet" href="https://dreamsky.github.io/main/blog/common/init.css">
    <script src="https://dreamsky.github.io/main/blog/common/jquery.min.js"></script>
</head>

<body>
    <div class="content">
        <div class="container-fluid">


  
            <div class="row" style=" padding-bottom: 1em;">
                <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#home">Content</a></li>
                    <li><a data-toggle="tab" href="#menu1">Parameter</a></li>
                    <li><a data-toggle="tab" href="#menu2">Upload</a></li>
                    <li><a data-toggle="tab" href="#menu3">Preview</a></li>
                </ul>

                <div class="tab-content">
                    <div id="home" class="tab-pane fade in active">


                        <div id='pad-wrapper' class="row">
                            <div id="editparent">
                                <div id='editControls' class='span9' style=' padding:5px;'>
                                    <div class='btn-group'>
                                        <a class='btn' data-role='undo' href='#'><i class='icon-undo'></i></a>
                                        <a class='btn' data-role='redo' href='#'><i class='icon-repeat'></i></a>
                                    </div>
                                    <div class='btn-group'>
                                        <a class='btn' data-role='bold' href='#'><b>Bold</b></a>
                                        <a class='btn' data-role='italic' href='#'><em>Italic</em></a>
                                        <a class='btn' data-role='underline' href='#'><u><b>U</b></u></a>
                                        <a class='btn' data-role='strikeThrough' href='#'><strike>abc</strike></a>
                                    </div>
                                    <div class='btn-group'>
                                        <a class='btn' data-role='justifyLeft' href='#'><i class='icon-align-left'></i></a>
                                        <a class='btn' data-role='justifyCenter' href='#'><i class='icon-align-center'></i></a>
                                        <a class='btn' data-role='justifyRight' href='#'><i class='icon-align-right'></i></a>
                                        <a class='btn' data-role='justifyFull' href='#'><i class='icon-align-justify'></i></a>
                                    </div>
                                    <div class='btn-group'>
                                        <a class='btn' data-role='indent' href='#'><i class='icon-indent-right'></i></a>
                                        <a class='btn' data-role='outdent' href='#'><i class='icon-indent-left'></i></a>
                                    </div>
                                    <div class='btn-group'>
                                        <a class='btn' data-role='insertUnorderedList' href='#'><i class='icon-list-ul'></i></a>
                                        <a class='btn' data-role='insertOrderedList' href='#'><i class='icon-list-ol'></i></a>
                                    </div>
                                    <div class='btn-group'>
                                        <a class='btn' data-role='h1' href='#'>h<sup>1</sup></a>
                                        <a class='btn' data-role='h2' href='#'>h<sup>2</sup></a>
                                        <a class='btn' data-role='p' href='#'>p</a>
                                    </div>
                                    <div class='btn-group'>
                                        <a class='btn' data-role='subscript' href='#'><i class='icon-subscript'></i></a>
                                        <a class='btn' data-role='superscript' href='#'><i class='icon-superscript'></i></a>
                                    </div>
                                </div>
                                <div id='editor' class='span9' style='' contenteditable>

                                </div>

                            </div>


                        </div>

                    </div>
                    <div id="menu1" class="tab-pane fade">
                        <label >Width:</label>
						 <br/>
						 
                        <select>
                          <option value="Default">Default</option>
                          <option value="Windows">Windows</option>
                        </select>
  
                         <label >Preview Width:</label>
						 <br/>
                        <input id="PreviewWidthId" type="text" name="fname" class="InputText"  /><br/>
						
						<label >QR Code Width :</label>
						<br/>
						<input id="QRCodeWidthId" type="text" name="fname"  value="160"  class="InputText"  /><br/>
                    </div>
                    <div id="menu2" class="tab-pane fade">
                        
					</div>
                    <div id="menu3" class="tab-pane fade">
                        <div id="PreviewDivId"></div>
                    </div>
                </div>

            </div>

<hr/>


            <div class="row">

                <button  class="btn btn-info"  onclick="takeScreenShot()"> To image</button>
                <br/>
                <div id="TempDivId"></div>
                <br/> Output Image:
                <br/>
                <div id="canvasImg"></div>
            </div>


        </div>

    </div>
    <div class="footer-banner" style="width:728px; margin:0 auto"></div>
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
    <!--<script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script>
        $(document).ready(function() {
            var PictureWidth = document.getElementById("editor").clientWidth;
            $('#PreviewWidthId').val(PictureWidth - 200);
            console.log('PictureWidth : ' + PictureWidth);
            window.takeScreenShot = function() {
                GeneratingContentDIV();
                GeneratingPicture();
            }
        });




        function GeneratingContentDIV() { 
		
		    var QRCodeWidth = $('#QRCodeWidthId').val();
			console.log('QRCodeWidth : '+QRCodeWidth);
            var contentValue = $('#editor').html(); //val

            var WechatLogoimageHTML = '<div style="text-align: center;" ><img  src="LikeHK_WechatPublicLogo.jpg" alt="Logo" width="100em" height="100em" /></div>';
			
            var WechatQRCodeimageHTML = '<div style="text-align: center;" ><img src="LikeHK_Wechat_public_QRCode.jpg" alt="QR Code" width="'+QRCodeWidth+'em" height="'+QRCodeWidth+'em" /></div>';


            var ClientWidthNumber = $('#PreviewWidthId').val();
            var HeaderDiv = '<div  style="background-color: white;width:' + ClientWidthNumber + 'px  "  >  ';
            var OutputHTML = HeaderDiv + WechatLogoimageHTML +
            '<hr/> ' + contentValue 
            + '<hr/>' + WechatQRCodeimageHTML + '<br/></div>';
            
            
            $('#TempDivId').html(OutputHTML);
            $('#TempDivId').css('width', ClientWidthNumber);

            //Setting Preview Div 

            $('#PreviewDivId').html(OutputHTML);
            $('#PreviewDivId').css('width', ClientWidthNumber);
        }

        function GeneratingPicture() {


            html2canvas(document.getElementById("TempDivId"), {
                onrendered: function(canvas) {

                    var canvasImg = canvas.toDataURL("image/jpg");
                    $('#canvasImg').html('<img src="' + canvasImg + '" alt="">');
                    $('#TempDivId').html(''); // clear preview div 
                },
                width: $('#PreviewWidthId').val()-90
            });
        }



        $(function() {
            $('#editControls a').click(function(e) {
                switch ($(this).data('role')) {
                    case 'h1':
                    case 'h2':
                    case 'p':
                        document.execCommand('formatBlock', false, '<' + $(this).data('role') + '>');
                        break;
                    default:
                        document.execCommand($(this).data('role'), false, null);
                        break;
                }

            })
        });
    </script>
</body>

</html>
