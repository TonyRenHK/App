<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Generate Picture</title>
    <link href="assets/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="assets/css/font-awesome.css" rel="stylesheet">
    <style>
        body {}
        .content {
            margin: 100px;
        }

        #editor {
            resize: vertical;
            overflow: auto;
            border: 1px solid silver;
            border-radius: 5px;
            min-height: 200px;
            box-shadow: inset 0 0 10px silver;
            padding: 1em;
        }
    </style>
    <link rel="stylesheet" href="https://dreamsky.github.io/main/blog/common/init.css">
    <script src="https://dreamsky.github.io/main/blog/common/jquery.min.js"></script>
</head>

<body>
    <div class="content">
        <div class="container-fluid">
            <div id='pad-wrapper'>
                <div id="editparent">
                    <div id='editControls' class='span9' style=' padding:5px;'>
                        <div class='btn-group'>
                            <a class='btn' data-role='undo' href='#'><i class='icon-undo'></i></a>
                            <a class='btn' data-role='redo' href='#'><i class='icon-repeat'></i></a>
                        </div>
                        <!-- <div class='btn-group'>
								<a class='btn' data-role='cut' href='#'><i class='icon-cut'></i></a>
								<a class='btn' data-role='copy' href='#'><i class='icon-copy'></i></a>
								<a class='btn' data-role='paste' href='#'><i class='icon-paste'></i></a>
							</div> -->
                        <div class='btn-group'>
                            <a class='btn' data-role='bold' href='#'><b>Bold</b></a>
                            <a class='btn' data-role='italic' href='#'><em>Italic</em></a>
                            <a class='btn' data-role='underline' href='#'><u><b>U</b></u></a>
                            <a class='btn' data-role='strikeThrough' href='#'><strike>abc</strike></a>
                        </div>
                        <div class='btn-group'>
                            <a class='btn' data-role='justifyLeft' href='#'><i class='icon-align-left'></i></a>
                            <a class='btn' data-role='justifyCenter' href='#'><i class='icon-align-center'></i></a>
                            <a class='btn' data-role='justifyRight' href='#'><i class='icon-align-right'></i></a>
                            <a class='btn' data-role='justifyFull' href='#'><i class='icon-align-justify'></i></a>
                        </div>
                        <div class='btn-group'>
                            <a class='btn' data-role='indent' href='#'><i class='icon-indent-right'></i></a>
                            <a class='btn' data-role='outdent' href='#'><i class='icon-indent-left'></i></a>
                        </div>
                        <div class='btn-group'>
                            <a class='btn' data-role='insertUnorderedList' href='#'><i class='icon-list-ul'></i></a>
                            <a class='btn' data-role='insertOrderedList' href='#'><i class='icon-list-ol'></i></a>
                        </div>
                        <div class='btn-group'>
                            <a class='btn' data-role='h1' href='#'>h<sup>1</sup></a>
                            <a class='btn' data-role='h2' href='#'>h<sup>2</sup></a>
                            <a class='btn' data-role='p' href='#'>p</a>
                        </div>
                        <div class='btn-group'>
                            <a class='btn' data-role='subscript' href='#'><i class='icon-subscript'></i></a>
                            <a class='btn' data-role='superscript' href='#'><i class='icon-superscript'></i></a>
                        </div>
                    </div>
                    <div id='editor' class='span9' style='' contenteditable>
                        Please input
                    </div>
                    <button class='btn' onclick="takeScreenShot()">to image</button>
                    <br/>
                    <div id="TempDivId"></div>
                    <br/> Output:
                    <br/>
                    <div id="canvasImg"></div>

                </div>
            </div>
        </div>

    </div>
    <div class="footer-banner" style="width:728px; margin:0 auto"></div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script>
        $(document).ready(function() {

            window.takeScreenShot = function() {
                GeneratingContentDIV();
                GeneratingPicture();



            }
        });




        function GeneratingContentDIV() {
            var contentValue = $('#editor').html(); //val
            //console.log($('#editor').html());
            var WechatLogoimageHTML = '<div style="text-align: center;" ><img src="LikeHK_WechatPublicLogo.jpg" alt="QR Code" width="100em" height="100em" /></div>'
            var WechatQRCodeimageHTML = '<div style="text-align: center;" ><img src="LikeHK_Wechat_public_QRCode.jpg" alt="QR Code" width="150em" height="150em" /></div>'

            $('#TempDivId').html('<div style="background-color: white;" > '+WechatLogoimageHTML+ '<br/>' + contentValue + '<br/> <br/>'  + WechatQRCodeimageHTML + '<br/></div>');

        }
        
        function GeneratingPicture() {
            html2canvas(document.getElementById("TempDivId"), {
                onrendered: function(canvas) {
                    //document.body.appendChild(canvas);, height: 220
                    var canvasImg = canvas.toDataURL("image/jpg");
                    $('#canvasImg').html('<img src="' + canvasImg + '" alt="">');
                    $('#TempDivId').html('');
                },
                width: document.getElementById("editor").clientWidth
            });
        }

        $(function() {
            $('#editControls a').click(function(e) {
                switch ($(this).data('role')) {
                    case 'h1':
                    case 'h2':
                    case 'p':
                        document.execCommand('formatBlock', false, '<' + $(this).data('role') + '>');
                        break;
                    default:
                        document.execCommand($(this).data('role'), false, null);
                        break;
                }

            })
        });
    </script>
</body>

</html>
